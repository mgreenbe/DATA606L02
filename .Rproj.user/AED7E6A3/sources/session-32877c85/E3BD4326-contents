---
title: "Statistics 423 - Wednesday, February 1"
output: html_notebook
---

&copy; Jim Stallard 2023

<style>
div.blue pre { background-color:lightblue; }
div.blue pre.r { background-color:yellow; }
</style>

**Exercise 1:**

The data in the **stratflights.csv** (http://people.ucalgary.ca/~jbstall/DataFiles/stratflights.csv) resulted from a stratified random sampling of flights from different airlines/carriers:

- United Airlines (UA)
- American Airlines (AA)
- Delta Airlines (DL)
- Virgin Airlines (Vx)
- JetBlue Airways (B6)

These data resulted from a random sample of $n = 1000$ flights, taken from a population consisting of all domestic flights departing the three NYC-area international airports:

- EWK (Newark International Airport)
- JFK (JFK International Airport)
- LGA (Laguardia International Airport)

Read these data into a data frame in R, call the data frame **stratflights.df**:

```{r}
stratflights.df = read.csv("http://people.ucalgary.ca/~jbstall/DataFiles/stratflights.csv")
```


Consider the variable **arr_delay**, which measures the number of minutes a flight departing any of the three NYC area airports is late in arriving at its origin. For example, the first record in the data file corresponds to a Delta flight (DL), and the value of **arr_delay = -19**, meaning this particular flight arrived at its destintation 19 minutes *early*. 
</br>
</br>
Over the course of the entire year, there were a total of 32729 American Airlines flights leaving these three NYC-area airports, or

- $N_{AA} = 32729$
- $N_{UA} = 58665$
- $N_{DL} = 48110$
- $N_{B6} = 56635$
- $N_{VX} = 5162$


This stratified sample was such that the number of flights randomly chosen from each of the $H = 5$ carriers (for the **arr_delay** variable) is

- $n_{AA} = 166$
- $n_{UA} = 299$
- $n_{DL} = 225$
- $n_{B6} = 264$
- $n_{VX} = 30$

Below are the various boxplots that show a breakdown of the arrival-delays baesd on carrier:

<div class = "blue">
```{r}
ggplot(stratflights.df, aes(x = arr_delay, y = carrier)) + geom_boxplot(col="red", fill="blue", na.rm=TRUE) + xlab("Minutes a Flight Arrives Late at its Destination") + ylab("Carrier") + ggtitle("Boxplots of Arrival Delay, by Airline")
```
</div>

Answer the questions below:


(a) Compute the sampling weights, $w_{i}$, for each flight sampled. From this, would you say that a proportional or non-proportional stratified sampling was used?
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(b) You wish to estimate $\mu_{arr\_delay}$, the mean number of minutes a flight leaving any of the three NYC-area airports is late in arriving at its destination. Compute the value of $\overline{Y}$ and its empirical variance, $SD(\overline{Y})$. 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(c) From your computations in part (b), compute a 95% confidence interval for $\mu_{arr\_delay}$. 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(d) You wish to compute a confidence interval for the mean flight delay for each carrier, $\mu_{carrier\_i}$. If you wished all five confidence intervals to have an overall level of confidence of 95%, what level of confidence shoud you use for *each*? 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(e) Using the level of confidence computed in part (d), compute a confidence interval for the $\mu_{AA, arr\_delay}$, the mean arrival delay for all American Airlines domestic flights that leave the three NYC-area airports. 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(f) You wish to test the null hypothesis
$$
\begin{align}
{\rm H}_{0}: & \mu_{AA, arr\_delay} = \mu_{UA, arr\_delay} =\mu_{DL, arr\_delay} =\mu_{VX, arr\_delay} =\mu_{B6, arr\_delay} \\
{\rm H}_{A}: & {\rm H}_{0} \:\: \text{is false}
\end{align}
$$
Do these data support the null hypothesis? Compute the value of the test statistic and its $P$-value. 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

-----------------------------------

**Exercise 2:** A recent Angus Reid survey[^1] of $n = 1603$ random chosen Canadians was conducted. Each was asked the following question: "If the vaccine against the coronavirus become available to you, would you get vaccinated, or not?" A break down of the results by *age group* is provided below, with each $\widehat{p}_{i}$ representing the proportion who *would be vaccinated*. 

$$
\begin{array}{lcccccc}
          &   \text{18 < 34}   & \text{35 < 54} & \text{55 and over} \\[0.5ex]
          \hline
n_{i}     & 453               & 554             &  596            \\[0.5ex]
\widehat{p}_{i} & 0.48        &   0.42          &   0.54          \\[0.5ex]
N_{i}     & 8,890,630       &    9,934,958      & 12,141,003
\end{array}
$$
$N_{i}$s are determined from (https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1710000501).

(a) Compute the value of $\widehat{p}$ and its standard deviation (empirical), $SD(\widehat{p})$. (Please do not do so by hand..)
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(b) From your result in part (a), compute the 95% confidence interval for $p$, the proportion of all Canadians who would get vaccinated. 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>

(c) Now, compute the 95% confidence interval for the *Total* number of Canadians (aged 18 years of age or older) who would get a covid-19 vaccination once it becomes available to them. 
</br>
</br>
**Answer:**

<div style="margin-bottom:100px;">
</div>





